#!/usr/bin/env python

import argparse
import datetime
import rr.common

# --ml cannot be used with -m, or -y
the_description='Process Coolrunning race results'
parser = argparse.ArgumentParser(description=the_description)
group = parser.add_mutually_exclusive_group()
parser.add_argument('-m', '--month', dest='month',
        default=datetime.date.today().month,
        choices=['janfeb','march','april','may','june',
                'july','aug','sept','october','novdec'],
        help='month')
parser.add_argument('-o', '--output', dest='output_file',
        default='results.html', 
        help='output file, default is results.html') 
parser.add_argument('-v', '--verbose', 
        dest='verbose', 
        choices=['debug', 'info', 'warning', 'error', 'critical'],
        default='info', 
        help='verbosity level, default is "info"')
parser.add_argument('-y', '--year', dest='year',
        default=datetime.date.today().year, help='year')
parser.add_argument('--ml', dest='membership_list',
        help='membership list', required=True)
group.add_argument('--rl', dest='race_list', 
        help='race list')

args = parser.parse_args()

o = rr.csrr(
        year        = args.year,
        month       = args.month,
        memb_list   = args.membership_list,
        race_list   = args.race_list,
        output_file = args.output_file,
        verbose     = args.verbose,
        )
o.run()

